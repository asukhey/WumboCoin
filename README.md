# WumboCoin

## Objective:

To understand the working of transactions on a decentralized network using blockchain with the help of cryptocurrency created alongwith the use of smart contracts. After reading about bitcoin, I was more interested in creating a cryptocurrency similar to that rather than investing in one ,P.S. Also it values at 7869.31 USD (dated 7/27/2018) , I don't have that much money.

## Introduction:

WumboCoin (Term coined by the legend Patrick Star from Spongebob Squarepants) is a cryptocurrency I created to understand working of cryptocurrency transactions on a decentralized network using blockchain technology pragmatically. Blockchain is defined as a chain of blocks linked to each other where each block is hashed using SHA-256. Reason why SHA-256 is used cause it follows "Avalanche effect"- A slight change in the text will render a completely different hash code from first to 64th HEX value.

### In this project, block has following important properties:

#### i. Index Number
Determines where's the block situated in the blockchain

#### ii. Previous Hash
Holds the SHA-256 encoded hash of the block before. Also confirms that it is linked to the block before.

#### iii. Nonce
Number used only once (Nonce) is the only property that can be altered by the user to get a respective hash number below target hash (We'll get to that in the Mining section).

#### iv. Timestamp
Tells when the block was created, this is an important property of a block.

#### v. Data
In this case all the transactions made i.e sender, reciever and amount.

### Hash Number

Using the properties above generates a 64 hexadecimal hash number using 256 bit Secure Hashing Algorithm (SHA-256). 
**Target Hash** is a hash set by software and a block mush have hash number less than that. In this case To mine a block, hash should have starting 4 Hex digits as 0.

### Mining

The process is mining a block is to generate a hash code that is less than target hash - Hash generated by the software of a respective cryptocurrency. The properties of a block compose a hash code. Nonce is the only property that can be changed by the user and with that number ranging from 1 to 4 billion. There are 4 billion possible hash numbers that can be generated. Mining takes place with multiple systems (miners) connected in a decentralized network where each node has a copy of blockchain which is updated from time to time. Miner that generates the least possible hash value mines a block and gets rewarded for it.

## Practical Implementation

#### i. Block Initialization
I've currently tested the program in postman and have used three consoles as miners using Spyder IDE. Ports 5001,5002 and 5003 are miners and have initialized blocks in blockchain as mentioned below. The first block is defined as **genesis block**. Since it has no block before it, previous hash is set to 0.

![alt text](https://github.com/asukhey/WumboCoin/blob/master/Snaps/1_block_initialize.PNG "Block Initialization")


#### ii. Mine Block
This is a process of creating a block with hash number less than the target hash in hexadecimal format. The rule in the cryptocurrency is to ensure that atleast 4 digits in the start must be 0. Node with the least hex value mines the block and gets rewarded.

![alt text](https://github.com/asukhey/WumboCoin/blob/master/Snaps/2_mine_block.PNG "Mining Block")

#### iii. Connecting nodes
It is a post method that implements decentralized connection of various miners. In this case it's simply 3 separate consoles in Spyder IDE.

![alt text](https://github.com/asukhey/WumboCoin/blob/master/Snaps/3_connect_nodes.PNG "Blockchain Synchronization")

#### iv. Check if the blockchain in all nodes are synchronized
Each node has a blockchain attached to it and it is important to make sure that the number of nodes as well as it's contents are equal, when a block is mined, the blockchain is updated not only with the node that mined it but with other nodes in a network as well, Using a blockchain with more number of nodes.

![alt text](https://github.com/asukhey/WumboCoin/blob/master/Snaps/4_equalizing_blockchain.PNG "Blockchain Synchronization")

**Update- Adding user defined transactions through postman 7/30/2018**

#### v. Add Transaction
Created a new method that accepts following parameters from user - sender, receiver, amount. After the parameters are submitted, they'll be added in the next block mined. Following snaps implement the methods.

![alt text](https://github.com/asukhey/WumboCoin/blob/master/Snaps/5_User_Def_Transaction.PNG "Transaction created")

![alt text](https://github.com/asukhey/WumboCoin/blob/master/Snaps/6_mine_block.PNG "Transaction added to the block mined after")

#### vi. Viewing blockchain after the transactions
Kindly note that the blockchain is not similar to the ones above, since I haven't made it persistent yet, running the programs again reinitializes the blockchain with new blocks.

![alt text](https://github.com/asukhey/WumboCoin/blob/master/Snaps/7_view_Blocks.PNG "Blockchain")



## Smart Contracts

Smart Contract is a program created that runs on blockchain. There are two well known scripts for smart contracts i.e Bitcoin script and solidity. In this project I've used solidity since it is turing complete (enables programmer to code any logic into the program). Bitcoin script is not turing complete since it misses the concept of loops avoiding attackers to tamper with programming logic (Eg. adding infinite loop that can destroy the blockchain).

### Tools used for smart contracts:

**i. Truffle Ganache**- User Interface 
**ii. Remix Solidity**- Create Smart Contracts 
**iii. MyEtherWallet**- Deploy and interact with smart contracts 

### Working:

Smart Contract has been created under a solidity format file named WumboCoin.ico.sol. Following steps were taken to successfully test a set of functions created under smart contracts.

***a. Set Up a custom node**
A custom node is setup in MyEtherWallet with IP address of Ganache and a user defined name
![alt text](https://github.com/asukhey/WumboCoin/blob/master/Snaps/smart_contract_snaps/0.Set_Up_Custom_node.PNG "Custom Node")


***b. Deploy Contract**
By going to the contracts tab, you get an option to interact with contracts or deploy a contract. The latter one needs to be performed before executing any functions. To deploy the file, it needs to be compiled that generates a byte code. The snap below is from remix solidity website where the sol file was created. The details option in the compile tab generates byte code and ABI code (which'll be explained below)

![alt text](https://github.com/asukhey/WumboCoin/blob/master/Snaps/smart_contract_snaps/2.ABI_And_Bytecode.PNG "ABI & Byte Code")

After the contract has been deployed, a block is created
![alt text](https://github.com/asukhey/WumboCoin/blob/master/Snaps/smart_contract_snaps/2.0.contract_deployed.PNG "Deployed")

![alt text](https://github.com/asukhey/WumboCoin/blob/master/Snaps/smart_contract_snaps/2.1_detailed_blocks.PNG "Block Created")

![alt text](https://github.com/asukhey/WumboCoin/blob/master/Snaps/smart_contract_snaps/2.2.Transactions.PNG "Transaction")

***c. Contract Interaction**
After deploying the contract, the functions coded in the file can be executed to render output. Two parameters are accepted here- Contract address (mentioned in Ganache UI) and ABI (Code that explains what actions can run, in this case it is purchasing and selling of wumbo coins, and info such as usd rate etc). Here $1=100 WC(WumboCoins) 

![alt text](https://github.com/asukhey/WumboCoin/blob/master/Snaps/smart_contract_snaps/3.0.Contract_Interaction.PNG "ABI & Byte Code")

Following functions are defined in the smart contract

**I. Number of coins Issued**
![alt text](https://github.com/asukhey/WumboCoin/blob/master/Snaps/smart_contract_snaps/3.1.Coins_Issued.PNG "No. of Coins issued")

**II. Buy Coin**
This function accepts two parameters- investor (node address of the buyer) and usd_spent (amount of dollars spent)
![alt text](https://github.com/asukhey/WumboCoin/blob/master/Snaps/smart_contract_snaps/3.2.0.Buy_wc.PNG "Block Created")

Block is created that includes the transaction that can be viewed in ganache
![alt text](https://github.com/asukhey/WumboCoin/blob/master/Snaps/smart_contract_snaps/3.2.1.Block_Created.PNG "Block")

Block holds that respective transaction
![alt text](https://github.com/asukhey/WumboCoin/blob/master/Snaps/smart_contract_snaps/3.2.3.Transaction_Created.PNG "Transaction")

Details of the transaction
![alt text](https://github.com/asukhey/WumboCoin/blob/master/Snaps/smart_contract_snaps/3.2.4_Transaction_Detail.PNG "Detailed Transaction")

**III. Equity **

Mentions how many WumboCoins does the investor possess. This accepts investor's node address as the parameter.

![alt text](https://github.com/asukhey/WumboCoin/blob/master/Snaps/smart_contract_snaps/3.4.equity_wbc.PNG "Equity")


**IV. Equity of an investor in USD **

Mentions how many dollars worth of WumboCoin does a respective investor possess. This accepts investor's node address as the parameter. 

![alt text](https://github.com/asukhey/WumboCoin/blob/master/Snaps/smart_contract_snaps/3.3.equity_usd.PNG "USD Equity")


**V. USD WumboCoin Rate **
 
![alt text](https://github.com/asukhey/WumboCoin/blob/master/Snaps/smart_contract_snaps/3.5_usd_wbc_rate.PNG "USD WC Rate")

**VI. Number Of WumboCoins Purchased **
 
 Out of total WumboCoins Issued, how many of them have been purchased by investors.
 
![alt text](https://github.com/asukhey/WumboCoin/blob/master/Snaps/smart_contract_snaps/3.6.No_of_wbc_purchased.PNG "WumboCoins Purchased")


**VII. Sell Coin **
  
 Coins purchased by investor can be sold. This requires 2 parameters i.e Node Address of investor and number of coins. 
![alt text](https://github.com/asukhey/WumboCoin/blob/master/Snaps/smart_contract_snaps/3.7.0.Sell_wc.PNG "Sell Coin")

After the operation is executed a block is created storing the transaction.
![alt text]https://github.com/asukhey/WumboCoin/blob/master/Snaps/smart_contract_snaps/3.7.1.Block_Created.PNG "Block Created")

![alt text](https://github.com/asukhey/WumboCoin/blob/master/Snaps/smart_contract_snaps/3.7.2.Transaction_Created.PNG "Transaction in block")

![alt text](https://github.com/asukhey/WumboCoin/blob/master/Snaps/smart_contract_snaps/3.7.3.Transaction_Detail.PNG "Transaction Detail")


## Conclusion

To summarize all that I've learned. My main objective of this project was to implement decentralized networking with the help of blockchain alongwith embedding few protocols in it using smart contracts. Enclosing I would like to thank following people-
Kirill Eremenko, for explaining the concepts in an easier way and also recommending various research papers to learn more about the concepts involved in this project. Hadelin de Ponteves, For guiding with pragmatic implementation of blockchain, cryptocurrency an smart contracts. Prerna Kapoor, For suggesting the best name for cryptocurrency.
